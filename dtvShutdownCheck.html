<html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/2000/REC-xhtml1-200000126/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>DTV shutdown check</title>

<link rel="stylesheet" type="text/css" media="screen" href="http://se.ooyala.com/playertest/css/new.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src='http://player.ooyala.com/v3/a04ed287a9b84009814daf25d13aad29?debug=true'></script>
</head>

<body id="bodyId" class="mktEditable" align="center">
<div id="outerWrapDiv" class="mktEditable">
<div id="innerWrapDiv">

<div id="mktHeader" class="mktEditable">

<div id="top-header">
    <div id="zone-user-wrapper">
        <div id="logo-wrapper"><a href="#" id="logo"><img src="http://se.ooyala.com/playertest/images/logo_landingpage.png" alt="Ooyala" width="168" height="26" border="0" /></a></div>
        <h6>Powering personalized video experiences across all screens.</h6>
    </div>
    <div id="header-hr"></div>
<div class="block block-system block-menu block-main-menu block-system-main-menu odd block-without-title" id="block-system-main-menu">
    <div class="block-inner clearfix">
    <div id="top-nav" class="content clearfix">
        <ul class="menu">
            <li class="first leaf"><a href="#">Solutions</a></li>
            <li class="leaf"><a href="#">Services</a></li>
            <li class="leaf" style=""><a href="#">Customers</a></li>
            <li class="leaf" style=""><a href="#">Partners</a></li>
            <li class="leaf" style=""><a href="#">Resources</a></li>
            <li class="leaf" style=""><a href="#">About</a></li>
            <li class="leaf" style=""><a href="#">VideoMind</a></li>
            <li class="last leaf"><a href="#" id="contact-us-main" style="margin-right:0px;">Contact Us</a></li>
        </ul>
    </div>
    </div>
</div>
</div>

</div>

<div id="mktContent" class="mktEditable">

<center>
    <br /><br /><br />
    

<div></div>
<!-- Player Placement -->
<p>This is a test page for DTV shutdown check </p>
<form id="changeEmbedCode">
    <label for="newEmbedCode">Enter embed code:</label>
    <input id="newEmbedCode" placeholder="<<<embed Code>>>" value="<<<embed Code>>>" style="
    width: 300px;"/>
    <button type="submit">Submit</button>
</form>
<div id='playerwrapper' style='width:992px;height:558px'></div>


<script type="text/javascript">

            var ooyalaEmbedCode = 'UzajBoeToG7hYEe06cdiQEh7JE_-OE13';
      
    var opts = {};
 
    window.videoPlayer = OO.Player.create('playerwrapper',ooyalaEmbedCode,{ 
    autoplay:true,
    onCreate: function(player) {
         window.messageBus = player.mb;  // save reference to message bus
         window.player = player;
                                                        } 
        });

    console.log('player is init\'d', ooyalaEmbedCode);

    window.onload = function() {

        document.getElementById('changeEmbedCode').addEventListener('submit', function (e) {
            e.preventDefault();
            if (videoPlayer) {
                var ooyalaEmbedCode = document.getElementById('newEmbedCode').value;
                videoPlayer.setEmbedCode(ooyalaEmbedCode, { 
    autoplay:true,onCreate: function(player) {
         window.messageBus = player.mb;  // save reference to message bus

       } 

                         
                    });
            }
        });

    };

 /// this will subscribe to ALL events
/*window.messageBus.subscribe('*', 'example', 
     function(eventName) {
    
       console.log("RECEIVED EVENT: player " +eventName + JSON.stringify(arguments) ,event ,arguments  );
   });*/

window.messageBus.subscribe('playerEmbedded', 'example', 
     function(eventName) {
                    console.log("*****RECEIVED EVENT: player " + eventName + JSON.stringify(arguments) );
                    window.player.setTargetBitrateQuality('high');     
                    console.log(">>>>>>Set to high");    
       
                       });

window.messageBus.subscribe('bitrateInfoAvailable', 'example', 
           function(eventName) {
    
       console.log("++++RECEIVED EVENT: player " + eventName + JSON.stringify(arguments) );
                    window.player.setTargetBitrateQuality('high');     
                    console.log(">>>>>>Set to high"); 
                    //return;



   });



</script>
</body>
</html>
